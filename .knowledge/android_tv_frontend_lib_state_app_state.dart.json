{"is_source_file": true, "format": "Dart", "description": "This file defines the application state management class AppState for a Flutter-based Android TV app. It includes enums for app tabs, handles persistent storage of user data such as watchlist, last selected item, recent searches, and current tab, and provides methods to update and retrieve this data. It also interacts with a local data source for content recommendations and catalog search.", "external_files": ["package:flutter/foundation.dart", "package:shared_preferences/shared_preferences.dart", "../data/local_data_source.dart"], "external_methods": ["SharedPreferences.getInstance()", "SharedPreferences.setString()", "SharedPreferences.getString()", "SharedPreferences.setInt()", "SharedPreferences.getInt()", "SharedPreferences.remove()", "jsonDecode()", "jsonEncode()"], "published": ["AppTab", "AppState"], "classes": [{"name": "AppState", "description": "A ChangeNotifier-class managing the app's UI state, persisted user preferences, and content data. It handles loading/saving user-specific data such as watchlist, last selected item, recent searches, and current tab, and interacts with a local data source to provide recommendations and search functionalities."}], "methods": [{"name": "create", "description": "Static factory method to instantiate and initialize AppState, including loading persisted data and local data source."}, {"name": "_loadPersisted", "description": "Private method to asynchronously load stored user preferences from SharedPreferences."}, {"name": "_saveWatchlist", "description": "Private method to persist the current watchlist to SharedPreferences."}, {"name": "_saveLastSelected", "description": "Private method to persist the last selected content ID."}, {"name": "_saveRecentSearches", "description": "Private method to persist recent search queries."}, {"name": "_saveCurrentTab", "description": "Private method to persist the current selected tab."}, {"name": "setCurrentTab", "description": "Public method to update the current tab and persist the change."}, {"name": "isInWatchlist", "description": "Check if an item ID is in the user's watchlist."}, {"name": "toggleWatchlist", "description": "Add or remove an item ID to/from the watchlist and persist the change."}, {"name": "setLastSelected", "description": "Set the last selected content ID and persist the change."}, {"name": "addRecentSearch", "description": "Add a new search query to recent searches, ensuring uniqueness and limiting list size."}, {"name": "clearRecentSearches", "description": "Clear the list of recent searches."}, {"name": "getHomeRecommendations", "description": "Retrieve home page recommendations from the data source."}, {"name": "searchCatalog", "description": "Search the content catalog for a given query."}, {"name": "getItemById", "description": "Retrieve a specific content item by its ID."}, {"name": "getRecommendationsFor", "description": "Get recommended content based on a specific content ID."}], "calls": ["SharedPreferences.getInstance()", "prefs.getString()", "prefs.getInt()", "prefs.setString()", "prefs.setInt()", "prefs.remove()", "jsonDecode()", "jsonEncode()"], "search-terms": ["AppState", "SharedPreferences", "local data source", "persistent storage", "recommendations", "watchlist management", "tab navigation state", "recent searches", "content catalog search"], "state": 2, "file_id": 23, "knowledge_revision": 97, "git_revision": "", "revision_history": [{"74": ""}, {"96": ""}, {"97": ""}], "hash": "2975c201a1eb6151cd65d84a87d53d30", "format-version": 4, "code-base-name": "android_tv_frontend", "filename": "android_tv_frontend/lib/state/app_state.dart"}