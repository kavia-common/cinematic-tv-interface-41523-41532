{"is_source_file": true, "format": "Dart", "description": "This Dart source file defines an application state management class (AppState) for a Flutter-based Android TV app. It manages UI state such as current tab, watchlist, last selected item, and recent searches, with persistence handled via shared_preferences. It also includes an enumeration of primary app tabs.", "external_files": ["dart:convert", "package:flutter/foundation.dart", "package:shared_preferences/shared_preferences.dart"], "external_methods": ["SharedPreferences.getInstance", "SharedPreferences.getString", "SharedPreferences.getInt", "SharedPreferences.setString", "SharedPreferences.setInt", "SharedPreferences.remove", "jsonDecode", "jsonEncode"], "published": ["AppTab", "AppState"], "classes": [{"name": "AppTab", "description": "Enumeration of primary tabs in the TV app, including home, TV shows, movies, watchlist, and settings."}, {"name": "AppState", "description": "State container class for managing application UI state and persisting data across app restarts, including current tab, watchlist, last selected item, and recent searches."}], "methods": [{"name": "AppState.create", "description": "Factory method to asynchronously create and initialize an instance of AppState, loading persisted data."}, {"name": "AppState._loadPersisted", "description": "Private method to load persisted state data from shared_preferences."}, {"name": "_saveWatchlist", "description": "Private method to save the watchlist to shared_preferences."}, {"name": "_saveLastSelected", "description": "Private method to save the last selected content ID to shared_preferences."}, {"name": "_saveRecentSearches", "description": "Private method to save recent search queries to shared_preferences."}, {"name": "_saveCurrentTab", "description": "Private method to save the current tab selection to shared_preferences."}, {"name": "setCurrentTab", "description": "Public method to update the current tab and persist the change."}, {"name": "isInWatchlist", "description": "Checks if a given content ID is in the watchlist."}, {"name": "toggleWatchlist", "description": "Adds or removes a content ID from the watchlist and persists the change."}, {"name": "setLastSelected", "description": "Sets the last selected content ID and persists the change."}, {"name": "addRecentSearch", "description": "Adds a search query to recent searches, ensuring uniqueness and size cap, then persists."}, {"name": "clearRecentSearches", "description": "Clears all recent searches and updates persistence."}], "calls": ["SharedPreferences.getInstance", "SharedPreferences.getString", "SharedPreferences.getInt", "SharedPreferences.setString", "SharedPreferences.setInt", "SharedPreferences.remove", "jsonDecode", "jsonEncode"], "search-terms": ["AppState", "shared_preferences", "persistent state", "AppTab", "watchlist", "recentSearches", "lastSelectedId", "flutter"], "state": 2, "file_id": 23, "knowledge_revision": 74, "git_revision": "", "hash": "63b6ef3ed4c127f809adfd3b0984b303", "format-version": 4, "code-base-name": "android_tv_frontend", "filename": "android_tv_frontend/lib/state/app_state.dart", "revision_history": [{"74": ""}]}